<%- include ('../partials/header', { scripts: ["add-expense.js"], styles: [] }) %>

<span id="user_id" hidden><%=session.user._id %></span>
<div class="d-flex flex-fill" style="overflow-y: auto">
  <div class="container">
    <div class="jumbotron py-4">
      <h1 class="display-3 mb-4"><%=session.user.name.first %>'s expenses</h1>

      <!-- num results and search bar -->
      <div class="d-flex">
        <div class="mr-auto">
          <div class="" id="expenses-table_length"><label>Show
              <select name="expenses-table_length" class="custom-select-sm" style="border-width:0px;">
                <option value="10">10</option>
                <option value="25">25</option>
                <option value="50">50</option>
                <option value="100">100</option>
              </select> entries</label>
          </div>
        </div>
        <div class="">
          <div id="expenses-table_filter" class="">
            <label>Search: <input type="search" class="form-control-sm" placeholder="Search expense" style="border-width:0px;"></label>
          </div>
        </div>
      </div>

      <!-- table -->
      <table id="expenses-table" class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
        <thead>
          <tr>
            <th scope="col">Title</th>
            <th scope="col">Amount</th>
            <th scope="col">Date</th>
            <th scope="col">Category</th>
            <th></th>
          </tr>
          <tr>
            <th><input type="text" class="form-control" name="title" id="title" placeholder="Title" required></th>
            <th><input type="number" step="0.01" class="form-control" name="amount" id="amount" placeholder="00.00" required></th>
            <th><input type="date" class="form-control" name="date" id="date" required></th>
            <th>
              <div class="dropdown show">
                <select class="form-control" name="category" id="category" placeholder="category" required>
                  <option>Food</option>
                  <option>Utilities</option>
                  <option>Transportation</option>
                  <option>Entertainment</option>
                  <option>Insurance</option>
                  <option>Shopping</option>
                  <option selected>Others</option>
                </select>
              </div>
            </th>
            <th><button type="submit" id="add-btn" class="btn btn-primary m-0">Add</button></th>
          </tr>
        </thead>
        <tbody>
          <% expenses.forEach(function(expense) { if(!expense.disabled) { %>
          <tr class="expense" id="tr-<%= expense._id %>">
            <td><%= expense.title %></td>
            <td><%= expense.amount %></td>
            <td><%= expense.date.toDateString() %></td>
            <td><%= expense.category %></td>
            <td><button id="<%= expense._id %>" onclick="deleteExpense(event)" type="submit" class="btn btn-danger">Delete</button></td>
          </tr>
          <% }}); %>
        </tbody>
      </table>

      <nav aria-label="Page navigation example">
        <div class="d-flex">
        <p class="mr-auto">Showing 1 to 10 entries out of 24</p>
        <ul class="pagination">
          <li class="page-item disabled">
            <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Previous</a>
          </li>
          <li class="page-item"><a class="page-link" href="#">1</a></li>
          <li class="page-item"><a class="page-link" href="#">2</a></li>
          <li class="page-item"><a class="page-link" href="#">3</a></li>
          <li class="page-item">
            <a class="page-link" href="#">Next</a>
          </li>
        </ul>
        </div>
      </nav>
    </div>
  </div>
</div>

<%- include ('../partials/footer') %>
